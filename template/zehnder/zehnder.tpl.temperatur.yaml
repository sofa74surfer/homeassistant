- sensor:
    - name: "ComfoAir Temperatur Lüftung Comfort"
      state: >
        {% set zehnder_info = state_attr('sensor.zehnder_comfoair_info', 'getTemperatures') %}
        {% if states('sensor.zehnder_comfoair_info') == 'OK'
              and zehnder_info
              and 'comfort' in zehnder_info
              and 'value' in zehnder_info['comfort'] -%}
          {{ zehnder_info['comfort']['value'] }}
        {%- else -%}
          {{ states('sensor.comfoair_temperatur_luftung_comfort') }}
        {%- endif %}
      device_class: temperature
      unit_of_measurement: "°C"
      unique_id: template.sensor_comfoair_temperatur_luftung_comfort

    - name: "ComfoAir Temperatur Lüftung Aussenluft"
      state: >
        {% set zehnder_info = state_attr('sensor.zehnder_comfoair_info', 'getTemperatures') %}
        {% if states('sensor.zehnder_comfoair_info') == 'OK'
              and zehnder_info
              and 'outsideAir' in zehnder_info
              and 'value' in zehnder_info['outsideAir'] -%}
          {{ zehnder_info['outsideAir']['value'] }}
        {%- else -%}
          {{ states('sensor.comfoair_temperatur_luftung_aussenluft') }}
        {%- endif %}
      device_class: temperature
      unit_of_measurement: "°C"
      unique_id: template.sensor_comfoair_temperatur_luftung_aussenluft

    - name: "ComfoAir Temperatur Lüftung Zuluft"
      state: >
        {% set zehnder_info = state_attr('sensor.zehnder_comfoair_info', 'getTemperatures') %}
        {% if states('sensor.zehnder_comfoair_info') == 'OK'
              and zehnder_info
              and 'supplyAir' in zehnder_info
              and 'value' in zehnder_info['supplyAir'] -%}
          {{ zehnder_info['supplyAir']['value'] }}
        {%- else -%}
          {{ states('sensor.comfoair_temperatur_luftung_zuluft') }}
        {%- endif %}
      device_class: temperature
      unit_of_measurement: "°C"
      unique_id: template.sensor_comfoair_temperatur_luftung_zuluft

    - name: "ComfoAir Temperatur Lüftung Abluft"
      state: >
        {% set zehnder_info = state_attr('sensor.zehnder_comfoair_info', 'getTemperatures') %}
        {% if states('sensor.zehnder_comfoair_info') == 'OK'
              and zehnder_info
              and 'outgoingAir' in zehnder_info
              and 'value' in zehnder_info['outgoingAir'] -%}
          {{ zehnder_info['outgoingAir']['value'] }}
        {%- else -%}
          {{ states('sensor.comfoair_temperatur_luftung_abluft') }}
        {%- endif %}
      device_class: temperature
      unit_of_measurement: "°C"
      unique_id: template.sensor_comfoair_temperatur_luftung_abluft
    
    - name: "ComfoAir Temperatur Lüftung Fortluft"
      state: >
        {% set zehnder_info = state_attr('sensor.zehnder_comfoair_info', 'getTemperatures') %}
        {% if states('sensor.zehnder_comfoair_info') == 'OK'
              and zehnder_info
              and 'exhaustAir' in zehnder_info
              and 'value' in zehnder_info['exhaustAir'] -%}
          {{ zehnder_info['exhaustAir']['value'] }}
        {%- else -%}
          {{ states('sensor.comfoair_temperatur_luftung_fortluft') }}
        {%- endif %}
      device_class: temperature
      unit_of_measurement: "°C"
      unique_id: template.sensor_comfoair_temperatur_luftung_fortluft
