- sensor:

    # Luzern
    - name: "Netatmo Luzern Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_luzern_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_luzern_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_luzern_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_luzern_absolute_feuchte

    # Keller Stephan
    - name: "Netatmo Keller Stephan Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_steffs_home_keller_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_steffs_home_keller_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_keller_stephan_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_keller_stephan_absolute_feuchte

    # Keller Gang
    - name: "Netatmo Keller Gang Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_steffs_home_keller_keller_keel_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_steffs_home_keller_keller_keel_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_keller_gang_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_keller_gang_absolute_feuchte

    # Büro
    - name: "Netatmo Büro Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_steffs_home_living_buro_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_steffs_home_living_buro_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_buro_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_buro_absolute_feuchte

    # Wohnzimmer
    - name: "Netatmo Wohnzimmer Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_steffs_home_living_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_steffs_home_living_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_wohnzimmer_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_wohnzimmer_absolute_feuchte

    # Outdoor
    - name: "Netatmo Outdoor Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_steffs_home_living_outdoor_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_steffs_home_living_outdoor_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_outdoor_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_outdoor_absolute_feuchte

    # Schlafzimmer
    - name: "Netatmo Schlafzimmer Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.netatmo_steffs_home_living_sleep_humidity') | float(none) %}
        {% set temperature = states('sensor.netatmo_steffs_home_living_sleep_temperature') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_schlafzimmer_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_schlafzimmer_absolute_feuchte

    # Sauna
    - name: "Netatmo Sauna Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.sauna_luftfeuchtigkeit') | float(none) %}
        {% set temperature = states('sensor.sauna_temperatur') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_sauna_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_sauna_absolute_feuchte

    # Sauna oben
    - name: "Netatmo Sauna Oben Absolute Feuchte"
      state: >
        {% set humidity = states('sensor.sauna_oben_luftfeuchtigkeit') | float(none) %}
        {% set temperature = states('sensor.sauna_oben_temperatur') | float(none) %}
        {% if humidity is not none and temperature is not none %}
          {{ (10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 *
              10**((7.5 * temperature) / (237.3 + temperature)) /
              (temperature + 273.15)) | round(1) }}
        {% else %}
          {{ states('sensor.netatmo_sauna_oben_absolute_feuchte') }}
        {% endif %}
      device_class: weight
      state_class: measurement
      unit_of_measurement: "g"
      unique_id: template.netatmo_sauna_oben_absolute_feuchte
